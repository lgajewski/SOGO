<!-- Page Heading -->
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">
            Dashboard
        </h1>
        <!--<ol class="breadcrumb">-->
        <!--<li class="active">-->
        <!--<i class="fa fa-dashboard"></i> Dashboard-->
        <!--</li>-->
        <!--</ol>-->
    </div>
</div>
<!-- /.row -->

<div ng-switch="isAuthenticated()">
    <div class="alert alert-success alert-dismissable" ng-switch-when="true">
        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        <!--You are logged in as user "{{vm.account.login}}".-->
        You are logged in.
    </div>

    <div class="alert alert-warning" ng-switch-when="false">
        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        <!--If you want to <a class="alert-link" href="" ng-click="vm.login()">sign in</a>, you can try the default accounts:<br/>- Administrator (login="admin" and password="admin") <br/>- User (login="user" and password="user").-->
        If you want to <a class="alert-link">sign in</a>, you can try the default accounts:<br/>- Administrator
        (login="admin" and password="admin") <br/>- User (login="user" and password="user").
    </div>

    <div class="alert alert-warning" ng-switch-when="false">
        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        <!--You don't have an account yet? <a class="alert-link" ui-sref="register">Register a new account</a>-->
        You don't have an account yet? <a class="alert-link">Register a new account</a>
    </div>
</div>

<div class="row">
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-truck fa-5x"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">15</div>
                        <div>Trucks</div>
                    </div>
                </div>
            </div>
            <a href="#">
                <div class="panel-footer">
                    <span class="pull-left">Add new truck</span>
                    <span class="pull-right"><i class="fa fa-plus"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a>
        </div>
    </div>
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-green">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-trash-o fa-5x"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">{{items.blue.length + items.yellow.length + items.green.length}}</div>
                        <div>Containers</div>
                    </div>
                </div>
            </div>
            <a href="#">
                <div class="panel-footer">
                    <span class="pull-left">Add new container</span>
                    <span class="pull-right"><i class="fa fa-plus"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a>
        </div>
    </div>
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-yellow">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-users fa-5x"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">5</div>
                        <div>Users</div>
                    </div>
                </div>
            </div>
            <a href="#">
                <div class="panel-footer">
                    <span class="pull-left">Add new user</span>
                    <span class="pull-right"><i class="fa fa-plus"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a>
        </div>
    </div>
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-red">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-wrench fa-5x"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">13</div>
                        <div>Service alerts</div>
                    </div>
                </div>
            </div>
            <a href="#">
                <div class="panel-footer">
                    <span class="pull-left">View details</span>
                    <span class="pull-right"><i class="fa fa-plus"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a>
        </div>
    </div>
</div>
<!-- /.row -->
<div class="row">
    <div class="col-lg-8">
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-globe fa-fw"></i> Map
                <div class="pull-right">
                    <div class="btn-group">
                        <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                            Actions
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu pull-right" role="menu">
                            <li><a href="#">Action</a>
                            </li>
                            <li><a href="#">Another action</a>
                            </li>
                            <li><a href="#">Something else here</a>
                            </li>
                            <li class="divider"></li>
                            <li><a href="#">Separated link</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">
                <ui-gmap-google-map center='map.center' zoom='map.zoom' events="map.events" options="map.options"
                                    bounds="map.bounds" control="map.control">
                    <div ng-repeat="marker in selection">
                    <ui-gmap-marker coords="marker.coords" options="marker.options" events="marker.events" idkey="marker.id">
                        <ui-gmap-window>
                        <table style="width:100%">
                        <tbody>
                        <tr>
                        <td>Id:</td>
                        <td>{{marker.id}}</td>
                        </tr>
                        <tr>
                        <td>Type:</td>
                        <td>{{marker.type}}</td>
                        </tr>
                        <tr>
                        <td>Location:</td>
                        <td>{{marker.coords.latitude + ', ' + marker.coords.longitude}}</td>
                        </tr>
                        <tr>
                        <td>Capacity:</td>
                        <td>{{marker.capacity}} kg</td>
                        </tr>
                        <tr>
                        <td>Load:</td>
                        <td>{{marker.load}}</td>
                        </tr>
                        </tbody>
                        </table>
                        </ui-gmap-window>
                    </ui-gmap-marker>
                    <!--<ui-gmap-marker ng-repeat="marker in items['trucks']"  coords="marker.coords" options="marker.options" events="marker.events" idkey="marker.id">-->
                    <!--</ui-gmap-marker>-->
                    </div>
                </ui-gmap-google-map>
            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
    </div>
    <div class="col-lg-4">
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-map-marker fa-fw"></i> Filters
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">
                <div class="list-group">

                    <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search for registrations..">
                    <table id="myTable" class="table table-striped table-bordered table-hover">
                        <tr>
                            <th><input type="checkbox" ng-model="checkAllTrucks" ng-click="checkCollection('trucks')"></th>
                            <th>Truck</th>
                            <th>Location</th>
                        </tr>
                        <tr ng-repeat="item in items.trucks">
                            <td><input type="checkbox" checklist-model="selection" checklist-value="item" ng-checked="selection.indexOf(item) > -1"></td>
                            <td>{{item.registration}}</td>
                            <td><input type="radio" name="route" ng-click="showRoute(item.registration)"></td>
                        </tr>
                    </table>
                    <table class="table table-striped table-bordered table-hover" ng-repeat="col in collectionsAvailable">
                        <tr>
                            <th><input id="{{col}}" type="checkbox" class="checkbox" value="{{col}}"
                                ng-checked="selection.indexOf(col) > -1" ng-click="toggleCollection(col)"/></th>
                            <th>Show {{col}}</th>
                       </tr>
                   </table>
           <!--Choose filter:<br>-->
                    <!--<div ng-repeat="col in collectionsAvailable" class="checkbox">-->
                        <!--   <label><input id="{{col}}" type="checkbox" class="checkbox" value="{{col}}"-->
                                         <!--ng-checked="selection.indexOf(col) > -1" ng-click="toggleSelection(col)"/>Show-->
                        <!--{{col}}</label>-->
                    <!--</div>-->
                </div>
                <!-- /.list-group -->
            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
    </div>
    <!-- /.col-lg-4 -->
</div>

<script>
    function myFunction() {
        // Declare variables
        var input, filter, table, tr, td, i;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("myTable");
        tr = table.getElementsByTagName("tr");

        // Loop through all table rows, and hide those who don't match the search query
        for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[1];
            if (td) {
                if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    }

    function checkAll(ele) {
        var rows = document.getElementById('myTable').getElementsByTagName('tr');
        var checkboxes = [];
        for (i = 0; i < rows.length; i++) {
            var td = rows[i].getElementsByTagName('td')[0];
            if(td){
                checkboxes.push(td.getElementsByTagName('input')[0]);
            }
        }


        if (ele.checked) {
            for (var i = 0; i < checkboxes.length; i++) {
                if (checkboxes[i].type == 'checkbox') {
                    checkboxes[i].checked = true;
                }
            }
        } else {
            for (var i = 0; i < checkboxes.length; i++) {
                console.log(i)
                if (checkboxes[i].type == 'checkbox') {
                    checkboxes[i].checked = false;
                }
            }
        }
    }
</script>

<!-- /.col-lg-8 -->

